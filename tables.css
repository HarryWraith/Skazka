/* tables.css — generator panels (match Skazka theme) */

:root {
  /* Uses your global vars from styles.css; fallback here for safety */
  --sb-panel: var(--sb-panel, #12131a);
  --sb-panel2: var(--sb-panel2, #171922);
  --sb-border: var(--sb-border, #2a2d36);
  --sb-text: var(--sb-text, #e6dccb);
  --sb-dim: var(--sb-dim, #b9b09e);
  --sb-gold: var(--sb-gold, #c2a13a);
  --sb-gold-strong: var(--sb-gold-strong, #e1b84d);
  --sb-radius: var(--sb-radius, 14px);
}

/* Panel */
.tb-panel {
  display: grid;
  gap: 12px;
  background: linear-gradient(180deg, var(--sb-panel), var(--sb-panel2));
  border: 1px solid var(--sb-border);
  border-radius: var(--sb-radius);
  padding: clamp(12px, 2vw, 18px);
  color: var(--sb-text);
  box-shadow: 0 12px 24px rgba(0, 0, 0, .45), inset 0 1px 0 rgba(255, 255, 255, .02);
  margin: 18px 0;
  font-size: 1.1rem;
}

.tb-title {
  margin: 0 0 10px;
  color: var(--sb-gold-strong);
  letter-spacing: .3px;
  font-weight: 900;
}

/* Grid for controls */
.tb-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 10px;
  align-items: end;
}

.tb-label {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-weight: 800;
  letter-spacing: .2px;
}

/* Inputs/selects/buttons */
.tb-input,
.tb-select {
  width: 100%;
  background: #0f1117;
  color: var(--sb-text);
  border: 1px solid var(--sb-border);
  border-radius: 10px;
  padding: 10px 12px;
  min-height: 42px;
  outline: none;
}

.tb-input:focus,
.tb-select:focus {
  border-color: var(--sb-gold-strong);
  box-shadow: 0 0 0 2px rgba(226, 184, 77, .25);
  background: #10131a;
}

.tb-actions {
  display: flex;
  margin-top: 8px;
  gap: 8px;
  flex-wrap: wrap;
}

.tb-btn {
  background: linear-gradient(180deg, var(--sb-gold-strong), var(--sb-gold));
  color: #0b0a07;
  border: 1px solid color-mix(in oklab, var(--sb-gold) 70%, black);
  margin-top: 4px;
  border-radius: 10px;
  padding: 10px 14px;
  font-weight: 700;
  cursor: pointer;
  transition: transform .06s ease, box-shadow .2s ease, filter .2s ease;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.15);
}

.tb-btn:hover {
  filter: brightness(1.05);
  box-shadow: 0 0 0 2px rgba(226, 184, 77, .25), 0 10px 24px rgba(226, 184, 77, .25);
}

.tb-btn:active {
  transform: translateY(1px);
}

.tb-ghost-btn {
  background: transparent;
  color: var(--sb-gold-strong);
  border: 1px solid var(--sb-gold);
  border-radius: 10px;
  padding: 10px 14px;
  cursor: pointer;
  transition: background .2s ease, box-shadow .2s ease;
}

.tb-ghost-btn:hover {
  background: rgba(226, 184, 77, .08);
  box-shadow: inset 0 0 0 1px rgba(226, 184, 77, .18);
}

/* Result */
.tb-result {
  display: block;
  margin-top: 10px;
  padding: 10px 12px;
  border: 1px dashed var(--sb-border);
  border-radius: 10px;
  color: var(--sb-text);
  background: rgba(0, 0, 0, .14);
  white-space: pre-wrap;
  line-height: 1.55;
}

/* Traps: render multi-line nicely, with a bold label and readable spacing */
#trapResult {
  white-space: normal;
}

/* allow <div> lines to wrap */
#trapResult .tb-line {
  margin: 2px 0;
}

#trapResult .tb-label {
  font-weight: 800;
  margin-right: 4px;
}

/* Divider image consistency on this page */
.divider-image {
  display: block !important;
  width: min(680px, 60%);
  height: auto;
  margin: 0 auto clamp(8px, 2.4vw, 20px);
}

/* Treasure & Quirk results may include HTML lists */
#treasureResult,
#quirkResult {
  white-space: normal;
}

.tb-result ul {
  margin: 6px 0 0 1.1rem;
  padding: 0;
}

.tb-result li {
  margin: 2px 0;
}

.tb-kv {
  margin: 2px 0;
  display: grid;
  grid-template-columns: minmax(12rem, 22rem) 1fr;
  gap: 6px 12px;
}

.tb-kv .k {
  font-weight: 800;
  margin-right: 6px;
}

/* Simple table for shop results */
.tb-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}

.tb-table thead th {
  text-align: left;
  color: var(--sb-gold-strong);
  font-weight: 900;
}

.tb-table th,
.tb-table td {
  padding: 6px 8px;
  border-bottom: 1px dashed var(--sb-border);
}

.tb-table tbody tr:last-child td {
  border-bottom: 0;
}

.tb-seg {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.tb-segbtn[aria-pressed="true"] {
  outline: 2px solid var(--sb-gold-strong);
  filter: saturate(1.2) brightness(2);
}

.tb-help {
  opacity: .8;
  font-size: .9rem;
  margin-top: .25rem;
}

.tb-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 8px;
  border-bottom: 1px solid var(--tb-border, #2c2c2c);
}

.tb-row--head {
  font-weight: 600;
  opacity: .8;
  border-bottom: 1px solid var(--tb-border, #2c2c2c);
}

.tb-row.is-selected {
  outline: 1px solid var(--tb-accent, #d4b25e);
  outline-offset: -1px;
}

.tb-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 8px;
  margin-bottom: 2px;
}

.tb-detail-name {
  font-weight: 700;
  font-size: 1.125rem;
  line-height: 1.2;
}

.tb-badges {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.tb-badge {
  font-size: 12px;
  border: 1px solid #666;
  border-radius: 999px;
  padding: 2px 8px;
}

.tb-badge-warn {
  border-color: #b85;
  color: #b85;
}

.tb-kv {
  display: grid;
  gap: 4px;
}

.tb-kv-row {
  display: contents;
  gap: 8px;
  text-align: right;
  opacity: .7;
}

.tb-kv-key {
  width: 40%;
  opacity: .8;
}

.tb-kv-val {
  white-space: pre-wrap;
}

.tb-coins {
  opacity: .7;
  margin-left: 6px;
  font-size: 12px;
}

.tb-table tbody tr.is-selected {
  filter: brightness(2.0);
}

.tb-table td:nth-child(1) {
  width: 44%;
}

.tb-table td:nth-child(2) {
  width: 26%;
}

.tb-table td:nth-child(3),
.tb-table td:nth-child(4) {
  width: 15%;

}

#shopDetail {
  padding: 0;
}

.tb-detail {

  max-width: 56rem;
  margin-inline: auto;
  display: grid;
  gap: 10px;
}

#shopDetail.tb-result {
  padding: 13px;
  border: 1px solid var(--sb-gold);
  background-color: #161721;
}

.tb-detail-desc {
  margin: 2px 0 6px;
  opacity: .9;
}


/* Scrollable shop results (10-ish rows tall, sticky header) */
#shopResult {
  display: block;
  padding: 0 !important;
  /* kills the inherited .tb-result padding */
  margin: 0;
  overflow: auto;
  max-height: var(--shop-max, 420px);
  /* JS sets this precisely */
  -webkit-overflow-scrolling: touch;
}

#shopResult table {
  width: 100%;
  margin: 0;
}

#shopResult thead th {
  position: sticky;
  top: 0;
  background: var(--panel-bg, #0b0b0b);
  /* or your panel bg */
  z-index: 1;
}

/*shop privacy*/
.tb-privacy {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
}

.tb-privacy-label {
  font-size: .9rem;
  opacity: .8;
}

.tb-privacy-status {
  margin-left: .5rem;
  opacity: .75;
}

.tb-privacy-slider {
  width: 72px;
  height: 28px;
  appearance: none;
  background: transparent;
}

/* Track */
.tb-privacy-slider::-webkit-slider-runnable-track {
  height: 28px;
  border-radius: 999px;
  background: linear-gradient(90deg, #3aa655 0 50%, #3aa655 50% 100%);
}

.tb-privacy-slider::-moz-range-track {
  height: 28px;
  border-radius: 999px;
  background: linear-gradient(90deg, #3aa655 0 50%, #3aa655 50% 100%);
}

/* Thumb (knob) */
.tb-privacy-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: #fff;
  border: 2px solid rgba(0, 0, 0, .15);
  margin-top: 1px;
  /* center on track */
  box-shadow: 0 1px 2px rgba(0, 0, 0, .2);
}

.tb-privacy-slider::-moz-range-thumb {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: #fff;
  border: 2px solid rgba(0, 0, 0, .15);
  box-shadow: 0 1px 2px rgba(0, 0, 0, .2);
}

/* Optional focus ring */
.tb-privacy-slider:focus-visible {
  outline: 2px solid #4a90e2;
  outline-offset: 2px;
}

/* ===========================
   Forge Cheat Sheet — FINAL (tight lists + card/column fixes)
   =========================== */

#forgeSheet.tb-result {
  padding: 8px 10px;
}

/* Overall rhythm */
#forgeSheet .forge {
  display: grid;
  gap: 10px;
  line-height: 1.46;
}

#forgeSheet .forge-section {
  display: grid;
  gap: 4px;
}

/* Headings */
#forgeSheet .forge-h {
  margin: 2px 0 6px !important;
  font-weight: 900;
  color: var(--sb-gold-strong);
  letter-spacing: .2px;
}

/* Body text (never justify) */
#forgeSheet .forge-p,
#forgeSheet p {
  margin: 0;
  opacity: .92;
  text-align: left !important;
  text-justify: auto !important;
}

/* ---------------------------------
   BULLET LISTS — lock spacing tight
   --------------------------------- */
#forgeSheet .forge-list {
  /* Kill any global margins/padding and control spacing via gap */
  margin: 0 !important;
  padding: 0 0 0 1rem !important;
  list-style: disc outside;
  display: grid !important;
  /* force grid so gap applies */
  gap: 4px !important;
  /* tweak here (2–6px) */
}

#forgeSheet .forge-list>li {
  margin: 0 !important;
  padding: 0 !important;
  line-height: 1.46;
  /* match surrounding rhythm */
}

/* Two short paragraphs row */
#forgeSheet .forge-grid-2 {
  display: grid;
  grid-template-columns: 1fr;
  column-gap: 16px;
  row-gap: 8px;
  align-items: start;
}

@media (min-width: 960px) {
  #forgeSheet .forge-grid-2 {
    grid-template-columns: 1fr 1fr;
  }
}

/* Tool cards */
#forgeSheet .forge-tools {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 6px;
}

#forgeSheet .forge-tool {
  flex: 1 1 180px;
  border: 1px solid var(--sb-border);
  border-radius: 12px;
  padding-block: 6px;
  padding-inline: 10px;
  background: color-mix(in oklab, var(--sb-panel2) 85%, black);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .03);
  display: flex;
  flex-direction: column;
  gap: 4px;
}

#forgeSheet .forge-tool-title {
  font-weight: 800;
  margin: 0;
  color: var(--sb-gold-strong);
}

#forgeSheet .forge-tool-desc {
  font-size: .92rem;
  opacity: .88;
  margin: 0;
  text-align: left;
}

/* Table */
#forgeSheet .forge-table {
  width: 100%;
  border-collapse: collapse;
}

#forgeSheet .forge-table thead th {
  font-weight: 900;
}

#forgeSheet .forge-table th,
#forgeSheet .forge-table td {
  padding: 4px 6px;
}

#forgeSheet .forge-table td:first-child,
#forgeSheet .forge-table th:first-child {
  white-space: nowrap;
}

#forgeSheet .forge-table td:nth-child(2),
#forgeSheet .forge-table th:nth-child(2),
#forgeSheet .forge-table td:nth-child(3),
#forgeSheet .forge-table th:nth-child(3) {
  text-align: right;
}

/* Divider */
#forgeSheet .hr {
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--sb-border), transparent);
  margin: 4px 0;
  border: 0;
}

/* --- Generator panel (XGtE) --- */
#forgeSheet .forge-gen {
  border: 1px solid var(--sb-border);
  border-radius: 12px;
  padding: 10px;
  background: color-mix(in oklab, var(--sb-panel2) 85%, black);
  display: grid;
  gap: 8px;
  align-content: start;
}

#forgeSheet .forge-gen-title {
  font-weight: 900;
  color: var(--sb-gold-strong);
  letter-spacing: .2px;
}

#forgeSheet .forge-gen-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

#forgeSheet .forge-chip {
  border: 1px solid var(--sb-gold);
  background: transparent;
  color: var(--sb-gold-strong);
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 700;
  cursor: pointer;
}

#forgeSheet .forge-chip:hover {
  background: rgba(226, 184, 77, .08);
  box-shadow: inset 0 0 0 1px rgba(226, 184, 77, .18);
}

/* Generated pills output */
#forgeSheet .forge-gen-out {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  min-height: 28px;
}

#forgeSheet .forge-pill {
  border: 1px dashed var(--sb-border);
  border-radius: 999px;
  padding: 4px 8px;
  font-size: .92rem;
  opacity: .95;
}


/* optional: make the options look clickable and ensure it floats over content */
#preset-list {
  z-index: 20;
  box-shadow: 0 6px 18px rgba(0, 0, 0, .35);
}

#preset-list .tb-option:hover,
#preset-list .tb-option:focus {
  outline: none;
  filter: brightness(1.1);
}

/* ============================
   NPC GENERATOR — SCOPED STYLES
   ============================ */

/* Controls row: Occupation + Setting side-by-side; stack on small screens */
#npc-controls {
  display: grid;
  grid-template-columns: repeat(2, minmax(260px, 1fr));
  gap: .6rem;
  align-items: start;
}

@media (max-width: 680px) {
  #npc-controls {
    grid-template-columns: 1fr;
  }
}

/* Combobox + dropdown (scoped) */
#npc-panel .tb-combobox {
  position: relative;
  display: block;
}

#npc-panel .tb-combobox .tb-input {
  padding-right: 36px;
  /* room for the clear button */
}

#npc-panel .tb-input {
  width: 100%;
  display: block;
}

#npc-panel .tb-list {
  position: absolute;
  left: 0;
  right: 0;
  max-height: 240px;
  overflow-y: auto;
  display: none;
  z-index: 20;
  background: #111;
  border: 1px solid rgba(255, 255, 255, .12);
  box-shadow: 0 8px 24px rgba(0, 0, 0, .35);
}

#npc-panel .tb-option {
  padding: .4rem .6rem;
  cursor: pointer;
}

#npc-panel .tb-option:hover,
#npc-panel .tb-option:focus {
  background: rgba(255, 255, 255, .06);
  outline: none;
}

/* Result wrapper itself shouldn’t add big gaps */
#npc-pretty.tb-result {
  margin: 8px 0 0;
  padding: 8px 10px;
}

/* Compact NPC card (scoped to output) */
#npc-pretty .npc-card {
  line-height: 1.28;
  margin: 0;
}

#npc-pretty .npc-card * {
  box-sizing: border-box;
}

/* Nuke default margins that cause tall gaps—only inside the card */
#npc-pretty .npc-card h1,
#npc-pretty .npc-card h2,
#npc-pretty .npc-card h3,
#npc-pretty .npc-card h4,
#npc-pretty .npc-card p,
#npc-pretty .npc-card ul,
#npc-pretty .npc-card li,
#npc-pretty .npc-card blockquote {
  margin: 0;
}

/* Header */
#npc-pretty .npc-header {
  margin-bottom: .22rem;
}

#npc-pretty .npc-name {
  font-weight: 700;
  font-size: 1.06rem;
}

#npc-pretty .npc-tags {
  display: flex;
  flex-wrap: wrap;
  gap: .3rem;
  margin-top: .12rem;
}

#npc-pretty .npc-card .tb-badge {
  padding: .08rem .4rem;
  font-size: .84em;
}

/* Key/Value rows */
#npc-pretty .npc-meta {
  margin: .12rem 0 .24rem;
}

#npc-pretty .npc-meta .row {
  display: grid;
  grid-template-columns: 120px 1fr;
  column-gap: .6rem;
  align-items: baseline;
  padding: .03rem 0;
  /* tight rows */
}

#npc-pretty .npc-meta .k {
  font-weight: 700;
}

/* Hooks */
#npc-pretty .npc-hooks {
  margin: .22rem 0 .18rem;
}

#npc-pretty .npc-hooks h4 {
  font-size: .92rem;
  font-weight: 700;
  margin-bottom: .14rem;
}

#npc-pretty .npc-hooks .hooks {
  list-style: disc;
  padding-left: .9rem;
}

#npc-pretty .npc-hooks .hooks li {
  margin: .06rem 0;
  line-height: 1.28;
}

/* Opener quote */
#npc-pretty .npc-opener {
  margin: .26rem 0 0;
  padding: .32rem .56rem;
  border-left: 2px solid currentColor;
  background: rgba(255, 255, 255, .06);
  border-radius: .32rem;
  opacity: .92;
}

/* NPC panel: neutralize the global .tb-result spacing behavior */
#npc-panel #npc-pretty {
  white-space: normal;
  /* stop preserving template newlines */
  line-height: 1.32;
  /* tighter than the global 1.55 */
  margin-top: 8px;
  padding: 8px 10px;
}

/* Keep the card compact (restates the tight rules, but scoped) */
#npc-panel #npc-pretty .npc-card {
  line-height: 1.28;
}

#npc-panel #npc-pretty .npc-card h1,
#npc-panel #npc-pretty .npc-card h2,
#npc-panel #npc-pretty .npc-card h3,
#npc-panel #npc-pretty .npc-card h4,
#npc-panel #npc-pretty .npc-card p,
#npc-panel #npc-pretty .npc-card ul,
#npc-panel #npc-pretty .npc-card li,
#npc-panel #npc-pretty .npc-card blockquote {
  margin: 0;
}

#npc-panel #npc-pretty .npc-header {
  margin-bottom: .2rem;
}

#npc-panel #npc-pretty .npc-name {
  font-weight: 700;
  font-size: 1.06rem;
}

#npc-panel #npc-pretty .npc-tags {
  display: flex;
  flex-wrap: wrap;
  gap: .3rem;
  margin-top: .12rem;
}

#npc-panel #npc-pretty .npc-card .tb-badge {
  padding: .08rem .4rem;
  font-size: .84em;
}

#npc-panel #npc-pretty .npc-meta {
  margin: .1rem 0 .22rem;
}

#npc-panel #npc-pretty .npc-meta .row {
  display: grid;
  grid-template-columns: 120px 1fr;
  column-gap: .6rem;
  align-items: baseline;
  padding: .02rem 0;
}

#npc-panel #npc-pretty .npc-meta .k {
  font-weight: 700;
}

#npc-panel #npc-pretty .npc-hooks {
  margin: .2rem 0 .16rem;
}

#npc-panel #npc-pretty .npc-hooks h4 {
  font-size: .92rem;
  font-weight: 700;
  margin-bottom: .12rem;
}

#npc-panel #npc-pretty .npc-hooks .hooks {
  list-style: disc;
  padding-left: .9rem;
}

#npc-panel #npc-pretty .npc-hooks .hooks li {
  margin: .05rem 0;
  line-height: 1.28;
}

#npc-panel #npc-pretty .npc-opener {
  margin: .24rem 0 0;
  padding: .3rem .56rem;
  border-left: 2px solid currentColor;
  background: rgba(255, 255, 255, .06);
  border-radius: .32rem;
  opacity: .92;
}

/* Clear (×) button inside inputs */
#npc-panel .tb-combobox .tb-clear {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  /* center vertically */
  height: 22px;
  width: 22px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 0;
  border-radius: 6px;
  background: transparent;
  color: var(--sb-dim);
  cursor: pointer;
  z-index: 21;
  /* above the input */
  padding: 0;
  line-height: 1;
}

#npc-panel .tb-combobox .tb-clear:hover {
  background: rgba(255, 255, 255, .08);
  color: var(--sb-text);
}

#npc-panel .tb-combobox .tb-clear:hover,
#npc-panel .tb-combobox .tb-clear:focus-visible {
  background: rgba(255, 255, 255, .08);
  color: var(--sb-text);
  outline: none;
}

/* Safari: ensure button isn't shifted by line-height quirks */
@supports (-webkit-touch-callout: none) {
  #npc-panel .tb-combobox .tb-clear {
    line-height: 1;
  }
}