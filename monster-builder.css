/* ===============================
   Skazka Theme Variables
================================ */
:root {
  --sb-bg: #0a0b0f;
  --sb-panel: #12131a;
  --sb-panel2: #171922;
  --sb-border: #2a2d36;
  --sb-text: #e6dccb;
  --sb-dim: #b9b09e;
  --sb-gold: #c2a13a;
  --sb-gold-strong: #e1b84d;
  --sb-chip: #20222b;
  --sb-radius: 14px;
  --sb-radius-sm: 10px;
  --sb-gap: 10px;
  --sb-font: "Alegreya", ui-serif, georgia, serif;
  --sb-mono: ui-monospace, menlo, consolas, monospace;

  /* Optional equal height:
     --sb-ability-minh: 280px; */
}

/* ===============================
   Panels
================================ */
.sb-panel {
  padding: clamp(12px, 2.2vw, 18px);
  font-family: var(--sb-font);
  color: var(--sb-text);
  background: linear-gradient(180deg, var(--sb-panel), var(--sb-panel2));
  border: 1px solid var(--sb-border);
  border-radius: var(--sb-radius);
  box-shadow: 0 12px 24px rgb(0 0 0 / 45%), inset 0 1px 0 rgb(255 255 255 / 2%);
}

.sb-title {
  margin: 0 0 8px;
  color: var(--sb-gold-strong);
  letter-spacing: .3px;
}

.sb-subtitle {
  margin: 10px 0 6px;
  color: var(--sb-gold);
}

.sb-tip {
  margin: 0 0 6px;
  font-size: .95rem;
  color: var(--sb-dim);
}

.sb-bullets {
  padding-left: 16px;
  margin: 0;
  color: var(--sb-dim);
}

/* ===============================
   Grid
================================ */
.sb-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: var(--sb-gap);
  margin-top: 8px;
}

/* ===============================
   Inputs / Selects / Textareas
================================ */
.sb-input,
.sb-select,
textarea.sb-input {
  box-sizing: border-box;
  width: 100%;
  min-height: 42px;
  padding: 10px 12px;
  font: 600 1rem var(--sb-font);
  line-height: 1.2;
  color: var(--sb-text);
  outline: none;
  background: #0f1117;
  border: 1px solid var(--sb-border);
  border-radius: 10px;
}

.sb-input::placeholder {
  color: color-mix(in oklab, var(--sb-dim) 75%, black);
}

.sb-input:focus,
.sb-select:focus,
textarea.sb-input:focus {
  background: #10131a;
  border-color: var(--sb-gold-strong);
  box-shadow: 0 0 0 2px rgb(226 184 77 / 25%);
}

/* Number inputs: validator-friendly */
input[type="number"].sb-num {
  appearance: none;
}

input[type="number"].sb-num::-webkit-outer-spin-button,
input[type="number"].sb-num::-webkit-inner-spin-button {
  margin: 0;
}

/* ===============================
   Fieldsets / Ability Grids
================================ */


#sb-builder fieldset.sb-ability {
  position: relative;
  padding: 12px;
  margin-top: 14px;
  overflow: visible;
  color: var(--sb-text);

  /* ensure legend is never clipped */
  background: rgb(0 0 0 / 12%);
  border: 1px solid var(--sb-border);
  border-radius: 10px;
}

.sb-ability-title {
  margin-top: 10px;
  margin-bottom: -10px;
  font-size: 1.5rem;
  font-weight: 800;
  color: var(--sb-text);

  /* Your other styling */
}

/* LEGEND â€” in normal flow (no absolute positioning) */
#sb-builder fieldset.sb-ability>legend {
  display: inline-block;

  /* slight indent; gives a clean look */
  padding: 0 .4em;

  /* shrink to fit */
  margin: 0 0 6px 12px;
  font-weight: 800;
  line-height: 1.1;
  color: var(--sb-text);
  text-shadow: none;
  background: linear-gradient(180deg, var(--sb-panel), var(--sb-panel2));
  border: 0;
  border-radius: 2px;
  box-shadow: none;
}

/* tidy label layout so captions align over controls */
.sb-ability-grid label,
#sb-builder .sb-ability-grid label,
#sb-builder .sb-grid>label {
  display: flex;
  flex-direction: column;
  gap: 6px;
  align-items: flex-start;
  font-weight: 800;
  letter-spacing: .25px;
}

/* Six-pack grid */
#sb-builder .sb-ability-grid {
  display: grid;
  grid-template-columns: repeat(6, minmax(88px, 1fr));
  gap: 8px;
  margin-top: 10px;

  /* consistent top gap under legend */
}

.sb-inline {
  display: flex;
  gap: 8px;
  align-items: center;
  margin-top: 10px;
  color: var(--sb-dim);
}

/* ===============================
   Helpers / Mini Grid
================================ */
.sb-helper {
  padding-top: 6px;
  margin-top: 14px;
  border-top: 1px dashed var(--sb-border);
}

.sb-mini-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 8px;
}

/* ===============================
   Repeaters
================================ */
.sb-row {
  margin-top: 10px;
}

.sb-list {
  display: grid;
  gap: 8px;
}

.sb-item {
  display: grid;
  gap: 6px;
  padding: 8px;
  color: var(--sb-text);
  background: #0f1117;
  border: 1px solid var(--sb-border);
  border-radius: 10px;
}

.sb-item .sb-two {
  display: grid;
  grid-template-columns: 220px 1fr;
  gap: 8px;
}

.sb-item textarea {
  min-height: 80px;
  resize: vertical;
}

/* ===============================
   Buttons
================================ */
.sb-btn {
  padding: 8px 12px;
  font-weight: 700;
  color: #0b0a07;
  text-shadow: 0 1px 0 rgb(255 255 255 / 15%);
  cursor: pointer;
  background: linear-gradient(180deg, var(--sb-gold-strong), var(--sb-gold));
  border: 1px solid color-mix(in oklab, var(--sb-gold) 70%, black);
  border-radius: 10px;
  transition: transform .06s ease, box-shadow .2s ease, filter .2s ease;
}

.sb-btn:hover {
  box-shadow: 0 0 0 2px rgb(226 184 77 / 25%), 0 10px 24px rgb(226 184 77 / 25%);
  filter: brightness(1.05);
}

.sb-btn:active {
  transform: translateY(1px);
}

.sb-ghost-btn {
  padding: 7px 12px;
  color: var(--sb-gold-strong);
  cursor: pointer;
  background: transparent;
  border: 1px solid var(--sb-gold);
  border-radius: 10px;
  transition: background .2s ease, box-shadow .2s ease;
}

.sb-ghost-btn:hover {
  background: rgb(226 184 77 / 8%);
  box-shadow: inset 0 0 0 1px rgb(226 184 77 / 18%);
}

/* ===============================
   Export Bar
================================ */
.sb-export {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
}

/* ===============================
   Preview
================================ */
#sb-preview .sb-pre,
.sb-pre {
  min-height: 240px;
  padding: 10px;
  font-family: var(--sb-mono);
  color: var(--sb-text);
  white-space: pre-wrap;
  background: #0f1117;
  border: 1px solid var(--sb-border);
  border-radius: 10px;
}

.sb-pre--small {
  min-height: 0;
}

/* ===============================
   Inline select + custom input
================================ */
.sb-two-inline {
  display: grid;
  grid-template-columns: 220px 1fr;
  gap: 8px;
}

/* ===============================
   Monster Builder Layout Fixes
================================ */
#sb-builder .sb-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 12px 16px;
  align-items: start;
}

/* Fieldsets span full grid width */
#sb-builder fieldset.sb-ability {
  grid-column: 1 / -1;
}

/* Inputs/selects sizing */
#sb-builder .sb-input,
#sb-builder .sb-select {
  box-sizing: border-box;
  width: 100%;
  min-height: 42px;
}

/* Creature Type (two inline) */
#sb-builder .sb-two-inline {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

@media (width <= 640px) {
  #sb-builder .sb-two-inline {
    grid-template-columns: 1fr;
  }
}

/* Helper text rhythm */
#sb-builder .sb-tip {
  display: block;
  margin-top: 4px;
  font-size: .9rem;
  opacity: 80%;
}

/* Disabled state */
#sb-builder select:disabled,
#sb-builder input:disabled,
#sb-builder textarea:disabled {
  cursor: not-allowed;
  opacity: 60%;
}

/* Buttons area spacing */
#sb-builder .sb-export {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

/* Optional equal height (enable var above) */
@supports (height: min(1px, 1px)) {
  #sb-builder fieldset.sb-ability {
    min-height: var(--sb-ability-minh, auto);
  }
}

/* ===============================
   Responsive
================================ */
@media (width <= 900px) {
  /* legends remain correct */
}

@media (width <= 720px) {
  .sb-item .sb-two {
    grid-template-columns: 1fr;
  }

  .sb-two-inline {
    grid-template-columns: 1fr;
  }
}