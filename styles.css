/* ===============================
   Reset & Tokens
================================ */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --nav-h: 80px;
  /* navbar height */
  --nav-gap: 12px;
  /* breathing room */
  --sb-bg: #0a0b0f;
  --sb-panel: #12131a;
  --sb-panel2: #171922;
  --sb-border: #2a2d36;
  --sb-text: #e6dccb;
  --sb-dim: #b9b09e;
  --sb-gold: #c2a13a;
  --sb-gold-muted: #c2a03a51;
  --sb-divider: color-mix(in oklab, var(--sb-gold) 35%, transparent);
  --sb-gold-strong: #e1b84d;
  --sb-radius: 14px;
  --sb-gap: 10px;
  --sb-title: #ffb700ff;
  --skz-gold: #d9b35a;
  --tl-clear-nudge-y: -2px;
  --tl-clear-nudge-x: -2px;
  --font-head: "Cinzel", serif;
  --font-body: "Alegreya", Georgia, serif;


  /* stripe width + column gap */
}

/* ===============================
   Base
================================ */
html {
  background: #0a0b0f;
}

:target {
  scroll-margin-top: 40vh;
  /* works with fragment navigation in modern browsers */
}

/* Only affects the materials table */
.materials-table {
  width: 100%;
  border-collapse: collapse;
  /* keep tidy spacing */
  border: none;
  /* no outer border */
}

/* Cells: no borders, same padding/align as before */
.materials-table th,
.materials-table td {
  border: none;
  /* remove all cell borders */
  padding: 0.2rem;
  vertical-align: top;
  background: transparent;
  /* default, overridden by row striping */
}

/* Header row (uses your tr-left class) */
.materials-table .tr-left th {
  text-align: left;
  /* optional: subtle header background; tweak or remove as desired */
  background: color-mix(in srgb, var(--sb-gold-strong) 10%, transparent);
}

/* Zebra striping for body rows */
.materials-table tbody tr:nth-child(odd) {
  background: var(--sb-row-odd, rgba(255, 255, 255, 0.03));
}

.materials-table tbody tr:nth-child(even) {
  background: var(--sb-row-even, rgba(255, 255, 255, 0.08));
}

/* Optional: a soft hover (still borderless) */
.materials-table tbody tr:hover {
  background: color-mix(in srgb, var(--sb-row-even, #ffffff) 20%, transparent);
}

/* Title/heading style (unchanged) */
.skz-vk-th {
  padding: 14px 0;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .08em;
  color: var(--sb-gold-strong);
  position: relative;
}

body {
  padding-top: calc(var(--nav-h) + var(--nav-gap));
  font-family: 'Alegreya', serif;
  min-height: 100vh;
  color: var(--sb-text);
  background-color: var(--sb-bg);
  font-size: 22px;
  /* Layered grainy background */
  background-image:
    url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 64 64'>\
  <filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/></filter>\
  <rect width='100%' height='100%' filter='url(%23n)' opacity='0.11'/>\
</svg>"),
    url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='128' height='128' viewBox='0 0 128 128'>\
  <filter id='n2'><feTurbulence type='fractalNoise' baseFrequency='0.45' numOctaves='2' stitchTiles='stitch'/></filter>\
  <rect width='100%' height='100%' filter='url(%23n2)' opacity='0.06'/>\
</svg>"),
    radial-gradient(100% 140% at 15% 20%, rgba(255, 255, 255, .05), transparent 40%),
    radial-gradient(120% 150% at 85% 10%, rgba(255, 255, 255, .03), transparent 45%),
    radial-gradient(120% 120% at 50% 40%, transparent 58%, rgba(0, 0, 0, .45) 78%, rgba(0, 0, 0, .75) 100%);
  background-repeat: repeat, repeat, no-repeat, no-repeat, no-repeat;
  background-size: 160px 160px, 420px 420px, 100% 100%, 100% 100%, 100% 100%;
  background-position: 0 0, 0 0, center, center, center;
  background-attachment: scroll, scroll, scroll, scroll, scroll;
}

body strong {
  font-weight: 300;
  filter: brightness(1.5);
}

.blue {
  color: blue;
  filter: brightness(0.5);
}

.red {
  color: red;
  filter: brightness(0.5);
}

.gold {
  color: var(--sb-gold-strong);
  filter: brightness(0.5);
}

.violet {
  color: violet;
  filter: brightness(0.5);
}

.silver {
  color: silver;
  filter: brightness(0.5);
}

.black {
  color: rgb(52, 51, 51);

}

.green {
  color: green;
  filter: brightness(0.5);
}

.white {
  color: whitesmoke;
  filter: brightness(0.5);
}

.grey {
  color: grey;
  filter: brightness(0.5);
}

a {
  color: var(--sb-gold);
  text-decoration: none;
}

ul {
  padding-left: 20px;
}

a:hover,
a:focus,
a:active {
  color: var(--sb-gold-strong);
}

blockquote {
  font: 600 1.3rem 'Alegreya', serif;
  padding: 10px;
  background: rgba(194, 161, 58, .10);
  border: 1px solid var(--sb-border);
  border-radius: 8px;
}


h2 {
  font-size: 2rem;
  font-weight: 900;
}

h3 {
  font-size: 1.6rem;
  font-weight: 900;
}

.h3c {
  text-align: center;
  margin-top: 6px;
}

.noborder {
  border: none;
}

img.noborder[src*="divider"] {
  display: block;
  margin: 0 auto 12px;
}

body p {
  text-align: justify;
  line-height: 1.5;
  margin: 0.4em 0;
}

.skz-quote-attribution {
  color: var(--sb-dim);
}

/* ===============================
   Layout
================================ */
.grid-container {
  display: grid;
  grid-template-columns: 20% 60% 20%;
  gap: 20px;
  max-width: 80%;
  margin: 2em auto 1em;
  align-items: start;
}



.grid-container-stats {
  display: grid;
  grid-template-columns: 20% 50% 30%;
  gap: 20px;
  max-width: 80%;
  margin: 2em auto 1em;
  align-items: start;
}



.grid-single {
  display: grid;
  grid-template-columns: repeat(1, 1fr);
  max-width: 80%;
  margin: 2em auto 1em;
  align-items: start;
}

.grid-even {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 40px;
  max-width: 80%;
  margin: 2em auto 1em;
  align-items: start;
}

.grid-tears {
  display: grid;
  grid-template-columns: repeat(30% 30% 30%);
  gap: 40px;
  max-width: 80%;
  margin: 2em auto 1em;
  align-items: center;
}

.vertical {
  max-width: 50%;
  margin: 2em auto 2em;
  align-items: start;

}

.grid-two {
  display: grid;
  grid-template-columns: 7fr 3fr;
  /* ~70% / 30% */
  gap: 40px;
  max-width: 80%;
  margin: 2em auto 1em;
  align-items: start;
}

.skz-grid {
  display: grid;
  grid-template-columns: 7fr 3fr;
  /* ~70% / 30% */
  gap: 40px;
  max-width: min(1600px, 90vw);
  margin: 2rem auto 1rem;
  align-items: start;
}

.skz-grid>* {
  min-width: 0;
}

/* prevents overflow in columns */

/* stack on smaller screens */
@media (max-width: 1200px) {
  .skz-grid {
    grid-template-columns: 1fr;
    gap: 24px;
  }
}


.grid-two-wide {
  display: grid;
  grid-template-columns: 3fr 7fr;
  /* ~70% / 30% */
  gap: 40px;
  max-width: 80%;
  margin: 2em auto 1em;
  align-items: start;
}

/* optional: stack on small screens */
@media (max-width: 900px) {
  .grid-two {
    grid-template-columns: 1fr;
  }
}

.grid-four {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  max-width: 80%;
  margin: 2em auto 1em;
  align-items: start;
}

.right-column {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.tr-left {
  text-align: left;
}

.center-column {
  padding: 0 10px;
  font-size: 1.2em;
  font-style: italic;
}

/* ===============================
   Forms / Buttons
================================ */
.contact,
textarea {
  width: 100%;
  font-size: 2rem;
  font-weight: 900;
  color: var(--sb-text);
  background: var(--sb-panel);
  border: 1px solid var(--sb-border);
  font-size: 1rem;
}

textarea.contact {
  height: 300px;
}

/* === Global: show hand cursor on clickable controls === */
button,
[role="button"],
input[type="button"],
input[type="submit"],
input[type="reset"],
.btn,
.button,
.clickable,
.timeline .event-header,
/* your timeline headers toggle open/close */
.skz-tl-more,
/* "More…" pill */
.skz-modal-close {
  /* modal close pill */
  cursor: pointer !important;
}

/* Sensible disabled state */
button:disabled,
[aria-disabled="true"],
.disabled {
  cursor: not-allowed !important;
}

button {
  background: var(--sb-panel);
  border: 1px solid var(--sb-border);
  color: var(--sb-text);
  padding: 8px;
  font-size: 16px;
  height: 40px;
  width: 100%;
}

.stat-btn {
  background: var(--sb-gold-strong);
  border: 1px solid var(--sb-gold);
  border-radius: 19px;
  color: var(--sb-bg);
  padding: 8px;
  font-size: 16px;
  height: 40px;
  width: 100%;
}

.nodec {
  list-style: none;
}

/* ──────────────────────────────────────────────────────────
   Table of Contents (ordered list)
   Usage: <ol class="toc-list"> … </ol>
   Colors fall back if your site vars aren't present.
   ────────────────────────────────────────────────────────── */
.toc-list {
  /* use your site palette (with safe fallbacks) */
  --skz-accent: var(--sb-gold-strong, #d6b36a);
  --skz-text: var(--sb-text, #e6dccb);
  --skz-muted: var(--sb-dim, #b9b09e);
  margin: 0;
  padding: 0;
  list-style: none;
  counter-reset: toc;
  font-family: "Alegreya", serif;
  font-size: clamp(1rem, 1.2vw, 1.125rem);
  line-height: 1.55;
}

.toc-list>li {
  counter-increment: toc;
  display: grid;
  grid-template-columns: auto 1fr;
  align-items: baseline;
  column-gap: 0.75rem;
  margin: 0.25rem 0;
  padding: 0.35rem 0.75rem 0.35rem 0;
  border-left: 2px solid color-mix(in srgb, var(--skz-accent) 75%, transparent);
  color: var(--sb-dim);
  font-size: 1.3rem;
}

.toc-list>li::before {
  /* Force the number back even if another rule nulled it */
  content: counter(toc, decimal-leading-zero) !important;
  font-variant-numeric: tabular-nums;
  font-weight: 700;
  color: var(--skz-accent);
  background: linear-gradient(180deg,
      color-mix(in srgb, var(--skz-accent) 28%, transparent),
      transparent);
  padding: 0.15rem 0.5rem;
  border-radius: 0.375rem;
  transform: translateX(-0.25rem);
}

.toc-list a {
  color: var(--skz-text);
  text-decoration: none;
  transition: color 160ms ease, text-shadow 160ms ease;
}

.toc-list a:hover,
.toc-list a:focus-visible {
  color: var(--skz-accent);
  text-shadow: 0 0 8px color-mix(in srgb, var(--skz-accent) 35%, transparent);
  outline: none;
}

/* Optional nested sections (roman numerals) */
.toc-list ol {
  list-style: none;
  margin: 0.25rem 0 0.35rem 1.8rem;
  padding: 0;
  counter-reset: toc-sub;
}

.toc-list ol>li {
  counter-increment: toc-sub;
  border-left: 1px solid color-mix(in srgb, var(--skz-accent) 35%, transparent);
  padding-left: 0.75rem;
  margin: 0.2rem 0;
  color: var(--skz-muted);
}

.toc-list ol>li::before {
  content: counter(toc-sub, lower-roman) "." !important;
  /* same protection */
  margin-right: 0.5rem;
  color: var(--skz-accent);
  font-variant-numeric: tabular-nums;
}



/* -------------------------------------------- */
/* Viking-ish header: geometric, gilt, no runes */
/* -------------------------------------------- */

.skz-viking {
  /* box & theme */
  display: inline-block;
  padding: 14px 0;
  font-family: "Cinzel", system-ui, Segoe UI, Roboto, Arial, sans-serif;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .08em;
  color: var(--sb-title);

  /* engraved/gilt vibe */
  text-shadow:
    0 0 0.5px rgba(0, 0, 0, .5),
    0 0 10px color-mix(in srgb, var(--sb-gold-strong) 18%, transparent);

  position: relative;
}



/* slim top/bottom gilt bands */
.skz-viking::before,
.skz-viking::after {
  content: "";
  position: absolute;
  left: 10px;
  right: 10px;
  height: 2px;
  background:
    linear-gradient(90deg,
      transparent 0%,
      color-mix(in srgb, var(--sb-title) 65%, transparent) 15%,
      var(--sb-title) 50%,
      color-mix(in srgb, var(--sb-title) 65%, transparent) 85%,
      transparent 100%);
  opacity: .75;
  border-radius: 2px;
}

.skz-viking::before {
  top: 6px;
}

.skz-viking::after {
  bottom: 6px;
}

/* diamond bracket ornaments (kept subtle) */
.skz-viking>.orn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-family: "Cinzel Decorative", serif;
  font-weight: 700;
  color: var(--sb-gold-strong);
  text-shadow:
    0 0 6px color-mix(in srgb, var(--sb-gold-strong) 35%, transparent);
  letter-spacing: .2em;
  font-size: 1.05rem;
  opacity: .95;
  pointer-events: none;
  /* purely decorative */
}




/*────────────────────────────────────────────────────────── */
/* ==========================================================================
   Skazka Tables – Replacement CSS
   - Contents list (pretty <ol>)
   - Rune-badged h2 titles (neon blue rune, no JS)
   --------------------------------------------------------------------------
   Relies on site variables:
     --sb-panel, --sb-border, --accent, --text
   ========================================================================== */


/* ------------------------------------------
   1) CONTENTS LIST (pretty ordered list)
   ------------------------------------------ */

/* Prefer class-based targeting */
.skz-ol {
  list-style: none;
  margin: 0;
  padding: 0;
  counter-reset: skz-ol;
  display: grid;
  gap: 10px;
}



/* Fallback: style the first article’s list if no class provided */
.grid-even>article:first-of-type>ol.skz-ol {
  list-style: none;
  margin: 0;
  padding: 0;
  counter-reset: skz-ol;
  display: grid;
  gap: 10px;
}

/* Shared item styling */
.skz-ol>li,
.grid-even>article:first-of-type>ol.skz-ol>li {
  position: relative;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px 12px 52px;
  /* left space for badge */
  background: var(--sb-panel);
  border: 1px solid var(--sb-border);
  border-radius: 12px;
  color: var(--text);
  line-height: 1.25;
  transition: border-color 160ms ease, transform 120ms ease;
  counter-increment: skz-ol;
}

.skz-ol>li:hover,
.grid-even>article:first-of-type>ol.skz-ol>li:hover {
  border-color: color-mix(in srgb, var(--sb-border) 60%, var(--accent) 40%);
  transform: translateY(-1px);
}

/* Only style lists that explicitly opt in via .skz-ol */
.skz-ol,
.grid-even>article:first-of-type>ol.skz-ol {
  counter-reset: skz-ol;
  list-style: none;
  margin: 0;
  padding: 0;
}

.skz-ol>li,
.grid-even>article:first-of-type>ol.skz-ol>li {
  position: relative;
  padding-left: 46px;
  /* room for the badge */
  counter-increment: skz-ol;
}

/* Number badge */
.skz-ol>li::before,
.grid-even>article:first-of-type>ol.skz-ol>li::before {
  content: counter(skz-ol);
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  width: 34px;
  height: 34px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  font-weight: 700;
  font-size: 0.95rem;
  background: color-mix(in srgb, var(--accent) 85%, white 15%);
  color: #111;
  border: 1px solid var(--sb-border);
  box-shadow:
    0 1px 0 rgba(0, 0, 0, .25) inset,
    0 1px 6px rgba(0, 0, 0, .25);
}






/* ===============================
   Articles
================================ */
article h3 {
  margin: 10px 0;
}

article img,
div img {
  width: 100%;
  border: 2px solid var(--sb-gold);
  border-radius: 8px;
}




article li {
  margin-bottom: 15px;
  text-align: justify;
}

/* ===============================
   Footer
================================ */
.footer {
  position: relative;
  background: var(--sb-panel2);
  color: var(--sb-dim);
  border-top: 1px solid var(--sb-divider);
  padding: 3rem 1rem;
  font-family: 'Cinzel', serif;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .03);
}

.footer::before {
  content: "";
  position: absolute;
  inset: 0 auto auto 0;
  height: 8px;
  width: 100%;
  background: linear-gradient(90deg,
      transparent 0%,
      color-mix(in oklab, var(--sb-gold) 18%, transparent) 12%,
      transparent 24%,
      transparent 76%,
      color-mix(in oklab, var(--sb-gold) 18%, transparent) 88%,
      transparent 100%);
  pointer-events: none;
  opacity: .6;
}

.footer-inner {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 8px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: .75rem;
}

.footer p {
  text-align: center;
  margin: .25rem 0;
}

.footer-inner img {
  height: 100px;
  display: block;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, .35));
}

.footer-nav,
.footer-socials {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  gap: .9rem 1.2rem;
  margin: .5rem 0 1rem;
}

.footer-nav a,
.footer-socials a {
  color: var(--sb-dim);
  text-decoration: none;
  padding: .25rem .75rem;
  border-radius: 8px;
  transition: color .25s ease, background .25s ease, box-shadow .25s ease;
}

.footer-nav a:hover,
.footer-socials a:hover {
  color: var(--sb-gold-strong);
  background: rgba(226, 184, 77, .08);
}

.footer-nav a:focus-visible,
.footer-socials a:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(226, 184, 77, .25);
  color: var(--sb-gold-strong);
}

.footer-copy {
  font-size: .95rem;
  color: #8d8576;
  margin-top: .5rem;
  opacity: .9;
}

/* ===============================
   Lightbox
================================ */
img.popup {
  cursor: zoom-in;
  transition: transform .2s;
}

#lightbox {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .8);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  overflow: hidden;
  touch-action: none;
}

#lightbox img {
  width: auto;
  height: auto;
  max-width: 600%;
  max-height: 600%;
  border-radius: 10px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, .5);
  cursor: move;
  transition: transform .1s ease-out;
  transform-origin: center;
  user-select: none;
  -webkit-user-drag: none;
}

#lightbox .close {
  position: absolute;
  top: 20px;
  right: 30px;
  color: var(--sb-text);
  font-size: 36px;
  font-weight: bold;
  cursor: pointer;
  z-index: 1100;
}

/* ===============================
   Voices of Skazka — Carousel
================================ */
.skz-fc {
  --gap: 12px;
  --radius: 14px;
  --pad: 12px;

  /* Card + arrow geometry */
  --card-w: min(900px, 80%);
  /* single source of truth for width */
  --arrow-gap: 18px;
  /* distance from card edge to arrow */

  display: block;
  width: 100%;
  text-align: center;
  padding-inline: clamp(10px, 2vw, 28px);
  /* tighter, even spacing to the divider/footer */
  margin: clamp(16px, 4vw, 48px) 0 clamp(24px, 3.5vw, 48px);
  position: relative;
  z-index: 0;
}

.skz-fc-viewport {
  position: relative;
  margin: 0 auto;
  width: var(--card-w);
  /* center and match card width */
  /* no height — let the active card define it */
}

.skz-fc-stage {
  position: relative;
}

/* Slide */
.skz-fc-slide {
  display: none;
  /* only active shown */
  position: relative;
  margin: 0 auto;
  width: var(--card-w);
  opacity: 0;
  pointer-events: none;
  z-index: 1;

  background: linear-gradient(180deg, var(--sb-panel), var(--sb-panel2));
  border: 1px solid var(--sb-border);
  border-radius: var(--sb-radius);
  box-shadow: 0 12px 28px rgba(0, 0, 0, .35), inset 0 1px 0 rgba(255, 255, 255, .03);
  overflow: hidden;
  transition: opacity .25s ease;
  cursor: pointer;
}

.skz-fc-slide .skz-fc-media {
  position: relative;
  width: 100%;
  aspect-ratio: 16/9;
  background: #0f1117;
  border-bottom: 1px solid var(--sb-border);
}

.skz-fc-slide .skz-fc-media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.skz-fc-slide .skz-fc-body {
  padding: var(--pad) calc(var(--pad) + 2px);
}

/* More readable typography */
.skz-fc-title {
  margin: 2px 0 6px;
  font-weight: 900;
  font-size: clamp(1.4rem, 1vw + 1rem, 1.9rem);
  color: var(--sb-text);
}

.skz-fc-text {
  font-size: clamp(1.12rem, 0.65vw + 1rem, 1.38rem);
  color: var(--sb-dim);
  line-height: 1.6;
  margin-bottom: 10px;
}

/* Active only */
.skz-fc-slide.skz-active {
  display: block;
  opacity: 1;
  pointer-events: auto;
  z-index: 3;
}

.skz-fc-slide.skz-prev,
.skz-fc-slide.skz-next {
  display: none;
}

/* Arrows — absolutely position relative to the full section,
   but compute offsets from the centered card's width */
.skz-fc-nav {
  --size: clamp(44px, 4vw, 60px);
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: var(--size);
  height: var(--size);
  display: grid;
  place-items: center;
  border-radius: 999px;
  border: 1px solid color-mix(in oklab, var(--sb-gold) 55%, black);
  background: linear-gradient(180deg, var(--sb-gold-strong), var(--sb-gold));
  color: #0b0a07;
  box-shadow:
    0 0 0 2px rgba(226, 184, 77, .18),
    0 10px 24px rgba(0, 0, 0, .45),
    inset 0 1px 0 rgba(255, 255, 255, .15);
  cursor: pointer;
  user-select: none;
  transition: transform .08s ease, filter .2s ease, box-shadow .2s ease;
  line-height: 1;
  font-size: clamp(18px, 3.2vw, 28px);
  z-index: 4;
}

/* Place arrows just outside the card edges, regardless of viewport width */
.skz-fc-prev {
  left: calc(50% - (var(--card-w) / 2) - var(--arrow-gap));
}

.skz-fc-next {
  right: calc(50% - (var(--card-w) / 2) - var(--arrow-gap));
}

/* No-JS fallback */
.skz-fc-stage:not(.is-ready) .skz-fc-slide:first-child {
  display: block !important;
  opacity: 1 !important;
  pointer-events: auto;
  z-index: 3;
}

/* ===============================
   Timeline
================================ */
.tl-title {
  width: min(1100px, calc(100% - 32px));
  margin: 0 auto 18px;
  padding: 10px 16px;
  text-align: center;
  font-size: clamp(1.6rem, 2.2vw, 2.2rem);
  font-weight: 900;
  color: var(--sb-text);
  background: var(--sb-panel);
  border: 1px solid var(--sb-border);
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, .35), inset 0 1px 0 rgba(255, 255, 255, .04);
  position: relative;
}

.tl-title::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 100%;
  width: 1px;
  height: 16px;
  transform: translateX(-50%);
  background: color-mix(in oklab, var(--sb-gold) 60%, transparent);
  opacity: .35;
}

/* Container + glowing spine */
.timeline {
  --title-clearance: 84px;
  position: relative;
  max-width: 1100px;
  margin: 0 auto 40px;
  padding: 24px 0;
}

.timeline h2 {
  position: relative;
  z-index: 1;
  width: min(1100px, calc(100% - 32px));
  margin: 0 auto 18px;
  padding: 10px 16px;
  text-align: center;
  font-size: clamp(1.8rem, 2.2vw, 2.4rem);
  font-weight: 900;
  color: var(--sb-text);
  background: var(--sb-panel);
  border: 1px solid var(--sb-border);
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, .35), inset 0 1px 0 rgba(255, 255, 255, .04);
}

.timeline::before {
  content: "";
  position: absolute;
  top: var(--title-clearance);
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 3px;
  background: linear-gradient(180deg,
      rgba(226, 184, 77, .65) 0%,
      rgba(226, 184, 77, .28) 15%,
      rgba(226, 184, 77, .20) 50%,
      rgba(226, 184, 77, .28) 85%,
      rgba(226, 184, 77, .65) 100%);
  box-shadow: 0 0 10px rgba(226, 184, 77, .22);
  opacity: .8;
  pointer-events: none;
}

.timeline::after {
  content: "";
  position: absolute;
  top: var(--title-clearance);
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 90px;
  background: radial-gradient(closest-side, rgba(226, 184, 77, .12), transparent 70%);
  opacity: .35;
  pointer-events: none;
  filter: blur(.5px);
}

/* Event blocks alternate left/right */
.event {
  position: relative;
  width: min(540px, calc(50% - 48px));
  padding: 0;
  margin: 22px 0;
}

.event:nth-child(even) {
  margin-left: auto;
}

/* Header card */
.event-header {
  position: relative;
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 14px 16px;
  border: 1px solid var(--sb-border);
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(18, 19, 26, .75), rgba(23, 25, 34, .75));
  backdrop-filter: saturate(120%) blur(2px);
  box-shadow: 0 3px 12px rgba(0, 0, 0, .32), inset 0 1px 0 rgba(255, 255, 255, .04);
  cursor: pointer;
  color: var(--sb-text);
}

.event-header:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(226, 184, 77, .25), 0 4px 16px rgba(0, 0, 0, .4);
}

/* Year + title */
.event-year {
  font-weight: bolder;
  font-size: clamp(1.2rem, 0.7vw + 1rem, 1.6rem);
  color: var(--sb-gold);
  margin-right: 6px;
}

.event-title {
  color: var(--sb-text);
  font-size: clamp(1.25rem, 0.75vw + 1rem, 1.7rem);
  letter-spacing: .2px;
}

/* Rune */
.rune {
  width: 28px;
  height: 28px;
  filter: drop-shadow(0 0 6px rgba(226, 184, 77, .15));
  transition: transform .25s ease, filter .25s ease;
}

.event-header:hover .rune {
  transform: rotate(-6deg) scale(1.03);
  filter: drop-shadow(0 0 10px rgba(226, 184, 77, .25));
}

/* Details */
.event-details {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: max-height .35s ease, opacity .35s ease, padding .25s ease;
  padding: 0 14px;
  border-left: 1px dashed var(--sb-border);
  margin-left: 10px;
  color: var(--sb-dim);
  line-height: 1.6;
  font-size: clamp(1.15rem, 0.6vw + 1rem, 1.3rem);
}

.event.open .event-details {
  max-height: 480px;
  opacity: 1;
  padding: 10px 14px 8px;
}

/* Open accent */
.event.open {
  transform: translateY(-2px);
}

.event.open .event-header {
  border-color: color-mix(in oklab, var(--sb-gold) 65%, var(--sb-border));
  box-shadow: 0 8px 24px rgba(0, 0, 0, .45), 0 0 0 1px rgba(226, 184, 77, .12) inset;
}

/* Branches drawn via timeline.js */
#tl-branches {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

#tl-branches .branch {
  fill: none;
  stroke: color-mix(in oklab, var(--sb-gold) 85%, #9a7b23);
  stroke-width: 2.25;
  filter: drop-shadow(0 0 6px rgba(226, 184, 77, .25));
  opacity: .85;
}

#tl-branches .leaf {
  fill: var(--sb-gold);
  filter: drop-shadow(0 0 8px rgba(226, 184, 77, .35));
  opacity: .95;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {

  .event,
  .event-details,
  .event-header,
  .rune {
    transition: none !important;
  }
}

/* Mobile timeline */
@media (max-width: 800px) {

  .timeline h2,
  .tl-title {
    width: calc(100% - 24px);
  }

  .timeline {
    padding-left: 16px;
    padding-right: 16px;
  }

  .timeline::before {
    left: 20px;
    transform: none;
    opacity: .15;
  }

  .timeline::after {
    left: 20px;
    transform: none;
    width: 70px;
    opacity: .25;
  }

  .event {
    width: 100%;
  }

  .event-details {
    border-left: none;
    padding-left: 0;
    margin-left: 0;
  }
}

/* ===============================
   Responsive
================================ */
@media (min-width: 920px) {
  .footer-inner.is-wide {
    display: grid;
    grid-template-columns: 220px 1fr 220px;
    align-items: center;
    gap: 1rem 2rem;
    text-align: left;
  }

  .footer-inner.is-wide .footer-nav,
  .footer-inner.is-wide .footer-socials {
    justify-content: center;
  }

  .footer-inner.is-wide p,
  .footer-inner.is-wide .footer-copy {
    text-align: right;
  }
}

@media (max-width: 1024px) {

  article,
  article.featured {
    display: block;
    margin: 0 20px;
  }

  article {
    grid-column: span 3;
    display: grid;
    align-items: center;
  }
}

@media (max-width: 900px) {

  .skz-fc-viewport,
  .skz-fc-slide {
    width: 88%;
  }

  /* card a bit narrower on tablets */
}

@media (max-width: 768px) {
  .grid-container {
    grid-template-columns: 1fr;
    max-width: 90%;
  }

  .center-column,
  .right-column {
    margin-bottom: 20px;
  }
}

@media (max-width: 760px) {
  .skz-fc {
    padding-inline: 12px;
  }

  .skz-fc-nav {
    --size: 44px;
  }
}

@media (max-width: 520px) {
  .footer {
    padding: 2.25rem 1rem;
  }

  .footer-inner img {
    height: 84px;
  }
}

/* Kill background drift on mobile / iOS */
@media (max-width: 900px),
(hover: none) and (pointer: coarse) {
  body {
    background-attachment: scroll;
    animation: none;
    background-position: center top, center, center, center, center;
  }
}

/* iOS Safari fix */
@supports (-webkit-touch-callout: none) {
  body {
    background-attachment: scroll;
    animation: none;
  }
}

span.tag {
  color: var(--sb-gold-strong);
  background-color: purple;
  border-color: var(--sb-gold);
}

/* ─────────────────────────────────────────────
   Stats page — clean v2 (tb-* aligned, polished)
   Depends on tables.css for tb-panel/tb-table/buttons
   ──────────────────────────────────────────── */

/* HERO: centered + panel-grade styling */


.page-hero {
  /* layout */
  padding: clamp(16px, 3vw, 24px);
  margin: 18px 5vw;
  text-align: center;
  display: grid;
  place-items: center;
  row-gap: 6px;
  /* panel look to match site */
  background: linear-gradient(180deg, var(--sb-panel, #12131a), var(--sb-panel2, #171922));
  border: 1px solid var(--sb-border, #2a2d36);
  border-radius: var(--sb-radius, 14px);
  box-shadow: 0 12px 24px rgba(0, 0, 0, .45), inset 0 1px 0 rgba(255, 255, 255, .02);
}

.page-hero>* {
  margin-inline: auto;
}

.page-hero .skz-viking {
  color: var(--sb-gold-strong, #e1b84d);
  letter-spacing: .3px;
  font-weight: 900;
  margin: 0;
}

.page-hero .sub {
  opacity: .88;
  max-width: 70ch;
  margin: 0;
}

/* optional actions row inside hero */
.page-hero .tb-actions {
  display: inline-flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 6px;
}

/* ensure buttons (and links-as-buttons) feel the same everywhere */
a.tb-btn,
a.tb-ghost-btn,
button.tb-btn,
button.tb-ghost-btn {
  display: inline-flex;
  align-items: center;
  gap: .5ch;
  text-decoration: none;
  cursor: pointer;
  /* hand on hover */
  border-radius: var(--sb-radius, 14px);
}

/* KPIs */
.kpi-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 10px;
  margin: 12px 0 20px;
}

.kpi-grid.kpi-mini {
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
}

.kpi-card {
  background: color-mix(in oklab, var(--sb-panel2, #171922) 85%, #000);
  border: 1px solid var(--sb-border, #2a2d36);
  border-radius: var(--sb-radius, 14px);
  padding: 10px 12px;
  text-align: center;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .03);
}

.kpi-label {
  color: var(--sb-gold-strong);
  font-size: .95rem;
  opacity: .8;
}

.kpi-value {
  font-size: 1.25rem;
  font-weight: 800;
  margin-top: 4px;
}

/* Utility chips */
.pill {
  display: inline-block;
  padding: 4px 10px;
  border: 1px solid var(--sb-border);
  border-radius: 999px;
  background: rgba(255, 255, 255, .04);
  font-size: .8rem;
  line-height: 1;
  white-space: nowrap;
}

.tag {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 8px;
  background: rgba(255, 255, 255, .06);
  border: 1px dashed var(--sb-border);
  font-size: .75rem;
}

.tag.good {
  border-color: #3cb371;
}

.tag.bad {
  border-color: #c04a4a;
}

/* Leaderboards (inside tb-panel; rows rendered with tb-table) */
.leaderboards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 10px;
  margin: 4px 0 12px;
}

.leaderboards .lb {
  border: 1px dashed var(--sb-border);
  border-radius: 12px;
  padding: 8px;
  background: rgba(255, 255, 255, .03);
}

.leaderboards .lb h3 {
  margin: 0 0 6px;
  font-size: 1rem;
}

/* Session list (left panel) */


.sl-item {
  border: 1px solid var(--sb-border, #2a2d36);
  background: color-mix(in oklab, var(--sb-panel2, #171922) 85%, #000);
  border-radius: 12px;
  padding: 10px;
  cursor: pointer;
  transition: filter .18s ease, transform .06s ease;
}

.sl-item:hover {
  filter: brightness(1.4) saturate(1.05);
}

.sl-item.active {
  border: 1px solid var(--sb-gold-strong, #e1b84d);
  background: transparent;
  box-shadow: none !important;
}

.sl-top {
  display: block;
}

.sl-top strong {
  display: block;
  line-height: 1.25;
  margin: 2px 0;
  color: var(--sb-gold-strong);
  filter: brightness(1.2);
  text-align: left;
}

.sl-date {
  display: block;
  margin-top: 4px;
  font-size: .9rem;
  opacity: .85;
}

.sl-tags {
  margin-top: 6px;
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

/* Session header + meta */
.session-header h2 {
  margin: 8px 0 4px;
}

.session-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 6px 0 8px;
}

/* Inspiration */


.insp-row {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.inspiration-session h3 {
  margin: 10px 0 6px;
}

.inspiration-session ul {
  margin: 0;
  padding-left: 1rem;
}

/* Encounters/Loot/Summary headings (tables come from tables.css) */
.encounters h3,
.loot h3,
.summary h3 {
  margin: 14px 0 8px;
}

/* Markdown summary */
.summary .markdown p {
  margin: 8px 0;
}

.summary .markdown h2,
.summary .markdown h2,
.summary .markdown h3 {
  margin: 10px 0 6px;
}

/* Event log */
.event-log {
  margin-top: 16px;
}

.event-log summary {
  cursor: pointer;
  padding: 8px;
  border: 1px solid var(--sb-border);
  border-radius: 10px;
  background: var(--sb-panel);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .03);
}

.events {
  list-style: none;
  display: grid;
  gap: 6px;
  margin-top: 10px;
  padding: 0;
}

.events li {
  padding: 8px;
  border: 1px dashed var(--sb-border);
  border-radius: 10px;
  background: rgba(255, 255, 255, .03);
}

.ev-time {
  opacity: .7;
  margin-right: 6px;
}

/* Characters (right panel) */
.char-card {
  border: 1px dashed var(--sb-border);
  border-radius: 12px;
  padding: 8px;
  background: rgba(255, 255, 255, .03);
  margin-bottom: 10px;
}

.muted {
  opacity: .75;
}

.small {
  font-size: .8rem;
  color: var(--sb-dim);
}

.num {
  font-variant-numeric: tabular-nums;
}

.tb-title {
  margin: 0 0 10px;
  color: var(--sb-gold-strong);
  letter-spacing: .3px;
  font-weight: 900;
}

.grid-four .tb-title {
  text-align: center;
}

/* tb-title enhancer: apply as class="tb-title skz-title" */
.tb-title.skz-title {
  /* keep tb-title base, then add punch */
  position: relative;
  text-align: center;
  color: var(--sb-gold-strong);
  /* match table heads */
  font-weight: 900;
  /* ensure heavy weight */
  letter-spacing: .02em;
  line-height: 1.2;
  text-shadow: 0 0 6px color-mix(in srgb, var(--sb-gold-strong) 28%, transparent);
}

/* responsive nudge without blowing up existing sizes */
h2.tb-title.skz-title {
  font-size: clamp(1.25rem, 0.9rem + 1vw, 1.6rem);
}

h3.tb-title.skz-title {
  font-size: clamp(1.05rem, 0.85rem + 0.7vw, 1.3rem);
}

/* gold underline (subtle, centered) */
.tb-title.skz-title::after {
  content: "";
  display: block;
  height: 2px;
  margin: 6px auto 2px;
  width: min(220px, 46%);
  border-radius: 2px;
  background: linear-gradient(90deg,
      transparent 0%,
      color-mix(in srgb, var(--sb-gold-strong) 60%, transparent) 15%,
      var(--sb-gold-strong) 50%,
      color-mix(in srgb, var(--sb-gold-strong) 60%, transparent) 85%,
      transparent 100%);
  opacity: .85;
}

.tb-kv-key {
  color: var(--sb-gold);
}

.tb-kv-key.small.muted {
  color: var(--sb-dim);
}

.tb-kv-key strong {
  color: var(--sb-gold-strong);
  filter: brightness(1.2);
}

.tb-actions btn {
  text-align: center;
}

/* Stats page only: center labels inside tb buttons */
.page-stats .tb-btn,
.page-stats .tb-ghost-btn,
.page-stats button.tb-btn,
.page-stats button.tb-ghost-btn,
.page-stats a.tb-btn,
.page-stats a.tb-ghost-btn {
  display: inline-flex;
  /* keep shape but allow centering */
  align-items: center;
  /* vertical center */
  justify-content: center;
  /* horizontal center */
  text-align: center;
  cursor: pointer;
}

/* Keep the export buttons full-width but centered */
.page-stats #stats-tools-panel .tb-actions .tb-btn,
.page-stats #stats-tools-panel .tb-actions .tb-ghost-btn {
  width: 100%;
}

/* Scroll only the list, not the panel header */
#stats-session-list {
  display: flex;
  flex-direction: column;
}




/* Allow the left grid column to let its child scroll (grid quirk) */
#stats-session-list {
  min-height: 0;
}

/* allow overflow from the left column */
#stats-session-list {
  min-height: 0;
}

/* fixed-height, scrollable list (10 rows; JS sets --sl-fixed-h) */
#stats-session-list .sl-items {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin: 0;
  padding: 0;
  list-style: none;
  max-height: var(--sl-max-h, 520px);
  /* cap at ~10 rows; scroll when exceeded */
  overflow-y: auto;
  /* use 'scroll' if you want the track always visible */
  background: transparent;
  scrollbar-gutter: stable;
  /* optional: keeps layout steady when bar appears */
}

.page-stats .tb-kv .tb-kv-val.nowrap {
  white-space: nowrap;
}

.page-stats .tb-kv .tb-kv-val .sep {
  padding: 0 6px;
  opacity: .9;
}

.lb h3 {
  color: var(--sb-gold)
}

/* Leaderboards: always stack rows from the top */
.page-stats .leaderboards .tb-table tbody {
  /* undo bottom alignment from tables.css */
  display: table-row-group;
  /* restore normal table flow */
  justify-content: flex-start !important;
  /* if flex sneaks in */
  align-content: start !important;
  /* if grid sneaks in */
}

/* optional: dim padded empty rows (see JS) */
.page-stats .leaderboards .tb-table tr.empty td {
  opacity: .5;
}

.page-stats #stats-detail-panel {
  background: rgba(255, 215, 0, 0.1);
}

.tb-panel {
  position: relative;
  display: grid;
  gap: 12px;
  background: linear-gradient(180deg, var(--sb-panel), var(--sb-panel2));
  border: 1px solid var(--sb-border);
  padding: clamp(12px, 2vw, 18px);
  color: var(--sb-text);
  box-shadow: 0 12px 24px rgba(0, 0, 0, .45), inset 0 1px 0 rgba(255, 255, 255, .02);
  margin: 0;
}

.vertical .tb-panel:not(:first-of-type) {
  margin-top: 40px;
}

.tb-panel+.tb-panel {
  margin-top: 35px;
}


page-stats #stats-detail-panel.tb-panel,
.page-stats #stats-detail-panel .tb-panel {
  box-shadow: none !important;
}

/* Summary markdown images */
.summary .markdown .md-img {
  margin: 14px 0;
  text-align: center;
}

.summary .markdown .md-img img {
  max-width: 100%;
  height: auto;
  border-radius: 10px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, .35);
}

.summary .markdown .md-img figcaption {
  font-size: .85rem;
  opacity: .8;
  margin-top: 6px;
}

/* Session party key/value layout */
.page-stats .session-kv .tb-kv-row {
  display: grid;
  grid-template-columns: max-content max-content;
  /* keep the two columns tight */
  column-gap: 20px;
  /* small gap between label/value */
  align-items: baseline;
}

.page-stats .session-kv .tb-kv-key,
.page-stats .session-kv .tb-kv-val {
  white-space: nowrap;
  /* keep each label/value on a single line */
  text-align: left;
}

/* No bullets in the inspiration lists */
.page-stats .inspiration-session ul {
  list-style: none;
  padding-left: 0;
  margin-left: 0;
}

.page-stats .inspiration-session li::marker {
  content: none;
}

/* search box spacing */
.page-stats .sl-search {
  margin: 6px 0 10px;
}

/* highlight matches in titles/tags */
.page-stats mark.hl {
  background: transparent;
  color: var(--sb-gold-strong, #e1b84d);
  border-bottom: 1px dotted var(--sb-gold-strong, #e1b84d);
  padding: 0 1px;
}

/* ============ Player Profile (scoped) ============ */
.page-profile {
  align-items: start;
}

.page-profile .profile-main,
.page-profile .profile-side {
  display: grid;
  gap: 12px;
}

/* Character strip: spans both columns, non-sticky, scroll if needed */
.page-profile .char-strip {
  grid-column: 1 / -1;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 10px;
  /* breathing room so tabs don't kiss the edge */
  margin: 6px 0 12px;
  background: var(--sb-panel2);
  border: 1px solid var(--sb-border);
  border-radius: 12px;
  overflow-x: auto;
  /* allow horizontal scroll on small screens */
  overflow-y: hidden;
  /* but clip vertical spill */
  overscroll-behavior-inline: contain;
}

/* Player buttons: big, centered, capped at 1/7 width */
.page-profile .char-tab {
  /* fluid sizing that scales with viewport but stays sane */
  --tab-h: clamp(56px, 6.5vw, 72px);
  /* overall height (trimmed to prevent overspill) */
  --tab-icon: calc(var(--tab-h) - 8px);
  --tab-gap: clamp(6px, 1vw, 12px);
  --tab-pad-x: clamp(10px, 1.5vw, 18px);
  --tab-font: clamp(1rem, 0.35vw + 1rem, 1.5rem);
  box-sizing: border-box;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--tab-gap);
  height: var(--tab-h);
  padding-inline: var(--tab-pad-x);
  border-radius: 12px;
  background: var(--sb-panel);
  border: 1px solid var(--sb-border);
  font-weight: 800;
  font-size: var(--tab-font);
  white-space: nowrap;
  cursor: pointer;
  flex: 1 1 auto;
  max-width: calc(100% / 6);
  /* never wider than 1/7 of strip */
  min-width: 120px;
  /* readable floor */

  /* prevent browser focus outline from spilling outside rounded container */
  outline: none;
}

.page-profile .char-tab:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(226, 184, 77, .25) inset;
  /* accessible focus ring, inside */
}

.page-profile .char-tab.is-active {
  border-color: color-mix(in oklab, var(--sb-gold) 60%, var(--sb-border));
  box-shadow: 0 0 0 1px rgba(212, 175, 82, 0.12) inset;
  background-color: var(--sb-gold);
}

/* Icon inside the button */
.page-profile .char-tab-avatar {
  width: var(--tab-icon);
  height: var(--tab-icon);
  border-radius: 8px;
  object-fit: contain;
  border: 0px solid var(--sb-border);
}

/* class icons get a hair of inner padding */
.page-profile .char-tab-avatar.icon {
  padding: 1px;
}

/* Label */
.page-profile .char-tab-name {
  flex: 1 1 auto;
  text-align: center;
  line-height: 1;
  letter-spacing: .2px;
}

/* Section tabs (Bio / Backstory / Chronicles / Inventory) */
.page-profile .pp-tabs {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin: 10px 0;
}

.page-profile .pp-tab {
  background: var(--sb-panel);
  border: 1px solid var(--sb-border);
  color: var(--sb-text);
  padding: 8px 12px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 700;
}

.page-profile .pp-tab.is-active,
.page-profile .pp-tab[aria-selected="true"] {
  border-color: color-mix(in oklab, var(--sb-gold) 60%, var(--sb-border));
  box-shadow: 0 0 0 1px rgba(226, 184, 77, .12) inset;
}

.page-profile .pp-panel {
  display: none;
}

.page-profile .pp-panel.is-active {
  display: block;
}

/* Bio layout + mini stats row under header KPIs */
.page-profile .pp-bio-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
}

.page-profile .pp-stats-row {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 8px;
  margin-top: 8px;
}

.page-profile .pp-stat {
  display: grid;
  place-items: center;
  gap: 2px;
  padding: 8px;
  border: 1px solid var(--sb-border);
  border-radius: 10px;
  background: rgba(255, 255, 255, .03);
}

.page-profile .pp-stat .label {
  font-weight: 700;
  opacity: .85;
  font-size: .8rem;
}

.page-profile .pp-stat .value {
  font-weight: 800;
  font-size: 1.05rem;
}

/* Sidebar: portrait only */
.page-profile .profile-side .tb-panel {
  padding: 0;
  border: none;
  background: transparent;
}

.page-profile .profile-side .tb-panel img {
  display: block;
  width: 100%;
  height: auto;
  border-radius: 12px;
  border: 1px solid var(--sb-border);
}

.tb-panel img {
  width: 100%;
}

/* Loading skeletons */
.page-profile .skeleton {
  opacity: .6;
  filter: grayscale(40%);
}

.page-profile .skeleton-tabs {
  height: 40px;
  width: 100%;
  border-radius: 10px;
  background: rgba(255, 255, 255, .04);
}

.page-profile .skeleton-main,
.page-profile .skeleton-side {
  min-height: 120px;
  border-radius: 10px;
  background: rgba(255, 255, 255, .04);
}

/* Chronicles: centered date, title, icon */
.page-profile .timeline .event .event-header {
  display: grid;
  grid-template-columns: max-content 1fr max-content;
  /* date | title | icon */
  align-items: center;
  gap: 10px;
  padding-block: 8px;
}

.page-profile .timeline .event .event-year,
.page-profile .timeline .event .event-title {
  display: flex;
  align-items: center;
  line-height: 1.1;
  margin: 0;
}

/* Preferred wrapper: <span class="ev-icon"><img class="rune"></span> */
.page-profile .timeline .event .ev-icon {
  --ev-icon-size: 24px;
  inline-size: var(--ev-icon-size);
  block-size: var(--ev-icon-size);
  display: grid;
  place-items: center;
  border-radius: 6px;
  padding: 2px;
}

.page-profile .timeline .event .ev-icon>.rune {
  inline-size: 100%;
  block-size: 100%;
  display: block;
  object-fit: contain;
}

/* Fallback if you render <img class="rune"> directly */
.page-profile .timeline .event .event-header>.rune {
  inline-size: 24px;
  block-size: 24px;
  display: block;
  object-fit: contain;
  align-self: center;
  justify-self: end;
  padding: 2px;
  border-radius: 6px;
}

/* Responsive */
@media (max-width: 900px) {
  .page-profile .pp-bio-grid {
    grid-template-columns: 1fr;
  }
}

/* ───────── Timeline Search (final replacement) ───────── */
/* sticky wrapper */
.tl-search {
  position: sticky;
  /* uses JS-calibrated --tl-stick-top; falls back to your --nav-h + 40px */
  top: var(--tl-stick-top, calc(var(--nav-h, 80px) + 40px));
  z-index: 40;
  left: 15px;
  /* overlay layout: input + clear share the same cell; count below */
  display: grid;
  grid-template-rows: auto auto;
  /* row 1: input; row 2: count */
  grid-template-columns: 1fr;
  align-items: center;

  width: min(250px, 13vw);
  margin: 8px 0 14px;
  padding: .5rem .75rem;
  background: color-mix(in srgb, var(--sb-panel) 85%, transparent);
  backdrop-filter: blur(4px);
  border: 1px solid var(--sb-border);
  border-radius: 12px;
}

/* input (row 1 / col 1) */
.tl-search input#tl-q {
  grid-row: 1;
  grid-column: 1;

  box-sizing: border-box;
  /* 42px includes border */
  -webkit-appearance: none;
  appearance: none;

  width: 100%;
  height: 42px;
  padding: 0 44px 0 14px;
  /* room for the clear button */
  border: 1px solid var(--sb-border);
  background: var(--sb-panel2);
  color: var(--text);
  border-radius: 10px;
  outline: none;
  font: inherit;
}

.tl-search input#tl-q::placeholder {
  color: color-mix(in srgb, var(--text) 55%, transparent);
}

/* belt-and-braces: if type="search" ever comes back, kill native clear */
.tl-search input#tl-q::-webkit-search-cancel-button,
.tl-search input#tl-q::-webkit-search-decoration,
.tl-search input#tl-q::-ms-clear,
.tl-search input#tl-q::-ms-reveal {
  -webkit-appearance: none;
  appearance: none;
  display: none;
}

/* clear button (inline SVG uses currentColor) */
.tl-search #tl-clear {
  grid-row: 1;
  grid-column: 1;
  align-self: center;
  /* vertical center of the input row */
  justify-self: end;
  /* hug right edge */
  margin-right: 12px;

  box-sizing: border-box;
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid var(--sb-border);
  background: var(--sb-panel);
  display: grid;
  place-items: center;
  cursor: pointer;

  color: var(--sb-gold);
  /* X colour (SVG inherits currentColor) */
  font-size: 0;
  /* no text glyph */
  z-index: 2;
}

.tl-search #tl-clear svg {
  display: block;
  width: 14px;
  height: 14px;
  transform: translate(var(--tl-clear-nudge-x), var(--tl-clear-nudge-y));
}

.tl-search #tl-clear:hover {
  background: var(--sb-panel2);
}

.tl-search #tl-clear:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

.tl-search input#tl-q:focus {
  border-color: color-mix(in srgb, var(--accent) 60%, var(--sb-border) 40%);
}

/* hide/disable the clear when empty; count line */
.tl-search input#tl-q:placeholder-shown~#tl-clear {
  opacity: .25;
  pointer-events: none;
}

.tl-search output#tl-count {
  grid-row: 2;
  grid-column: 1;
  justify-self: end;
  margin-top: 6px;
  font-size: .9rem;
  opacity: .75;
}

/* small screens */
@media (max-width: 420px) {
  .tl-search {
    width: 100%;
    padding: .5rem;
  }

  .tl-search input#tl-q {
    padding-right: 42px;
  }

  .tl-search #tl-clear {
    margin-right: 8px;
  }
}



/* ─────────────────────────────────────────────────────────
   SKAZKA • Bestiary Tarot Grid (LOCKED NAMEPLATE)
   - 3-wide grid, type-colored borders
   - FRONT: reserved bottom strip for name, media cannot overlap
   - Works for <img> and placeholder <div>
   ───────────────────────────────────────────────────────── */
#beastCards.beast-cards {
  --card-ratio: 2 / 3;
  --card-gap: 18px;
  --card-radius: 16px;
  --nameplate-h: 30px;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--card-gap);
}

/* Card shell */
.beast-card {
  position: relative;
  aspect-ratio: var(--card-ratio);
  perspective: 1200px;
  outline: none;
  --card-accent: var(--accent, #08c5ff);
  /* set per card in JS */
}

.beast-card:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 3px;
}

.beast-card[aria-selected="true"] .bc-face {
  box-shadow:
    0 0 0 1px color-mix(in srgb, var(--card-accent) 45%, transparent) inset,
    0 12px 28px rgba(0, 0, 0, .34);
}

/* Rotor */
.bc-rotor {
  position: absolute;
  inset: 0;
  transform-style: preserve-3d;
  transition: transform .45s ease;
  border-radius: var(--card-radius);
  box-shadow: 0 6px 18px rgba(0, 0, 0, .28), inset 0 0 0 1px rgba(255, 255, 255, .04);
}

.beast-card.is-flipped .bc-rotor {
  transform: rotateY(180deg);
}

/* Faces */
.bc-face {
  position: absolute;
  inset: 0;
  backface-visibility: hidden;
  overflow: hidden;
  border-radius: var(--card-radius);
  border: 1.5px solid color-mix(in srgb, var(--card-accent) 72%, var(--sb-border) 28%);
  background: var(--sb-panel);
  box-shadow:
    0 0 0 1px color-mix(in srgb, var(--card-accent) 24%, transparent) inset,
    0 8px 22px rgba(0, 0, 0, .22);
}

.bc-face img {
  border: none;
}

/* Decorative inner fillet (sits ABOVE media, BELOW nameplate) */
.bc-face::after {
  content: "";
  position: absolute;
  inset: 4px;
  border-radius: calc(var(--card-radius) - 4px);
  border: 1px solid color-mix(in srgb, var(--card-accent) 35%, transparent);
  pointer-events: none;
  z-index: 1;
}

/* ── FRONT: absolute layout with reserved name slot ───────── */
.bc-front {
  position: relative;
}

/* Media wrapper fills face except the nameplate strip at the bottom */
.bc-media {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: var(--nameplate-h);
  overflow: hidden;
  z-index: 0;
  /* under fillet and nameplate */
}

/* Media (img or placeholder) fills wrapper */
.bc-media>.bc-img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  background: radial-gradient(120% 100% at 50% 0%, #0b1118 0%, #070b10 60%, #05080d 100%);
}

.bc-media>.bc-img:where(div) {
  display: grid;
  place-items: center;
  font-weight: 800;
  font-size: 2rem;
  opacity: .28;
}

/* Nameplate is always visible, centered, and pinned to bottom */
.bc-front .bc-nameplate {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: var(--nameplate-h);
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px 12px;
  font-weight: 800;
  letter-spacing: .3px;
  text-align: center;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  background: linear-gradient(180deg, rgba(0, 0, 0, .55), rgba(0, 0, 0, 0) 70%);
  border-top: 1px solid color-mix(in srgb, var(--card-accent) 45%, var(--sb-border) 55%);
  pointer-events: none;
}

/* ── BACK: quick stats ───────────────────────────────────── */
.bc-back {
  transform: rotateY(180deg);
  display: grid;
  grid-template-rows: auto 1fr;
  padding: 12px 14px;
  background-image: url("./assets/card-back.jpg");
  background-color: rgba(255, 255, 255, 0.13);
  background-blend-mode: lighten;
}

.bc-title {
  font-weight: 800;
  margin: 0 0 6px;
}

.bc-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-bottom: 8px;
}

.bc-chip {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid var(--sb-border);
  background: var(--sb-panel2);
  font-size: .85rem;
  opacity: .9;
}

.bc-quick {
  display: grid;
  gap: 6px;
  font-variant-numeric: tabular-nums;
}

.bc-row {
  display: flex;
  justify-content: space-between;
  gap: 10px;
}

.bc-k {
  opacity: .85;
}

.bc-v {
  text-align: right;
}

/* Responsive */
@media (max-width: 1200px) {
  #beastCards.beast-cards {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 640px) {
  #beastCards.beast-cards {
    grid-template-columns: 1fr;
  }
}

#beastCards .bc-back .bc-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 3px;
  margin: 4px;
}

/* top type tags (formerly .bc-chip) */
#beastCards .bc-back .bc-tag {
  display: inline-block;
  padding: 4px 10px;
  line-height: 1;
  font-size: .9rem;
  border-radius: 999px;
  color: var(--text);
  background: color-mix(in srgb, var(--card-accent) 18%, var(--sb-panel2) 82%);
  border: 1px solid color-mix(in srgb, var(--card-accent) 60%, var(--sb-border) 40%);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, .04), 0 1px 6px rgba(0, 0, 0, .18);
}

/* stat tags row (formerly .bc-badges) */
#beastCards .bc-back .bc-stats {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;

}



/* base stat tag (formerly .stat-pill) */
#beastCards .bc-back .stat-tag {
  --tone: var(--sb-panel2);
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 2px 8px;
  border-radius: 999px;
  font-weight: 700;
  font-size: .88rem;
  font-variant-numeric: tabular-nums;
  color: var(--text);
  background: color-mix(in srgb, var(--tone) 28%, var(--sb-panel2) 72%);
  border: 1px solid color-mix(in srgb, var(--tone) 60%, var(--sb-border) 40%);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, .05), 0 1px 6px rgba(0, 0, 0, .2);

}

#beastCards .bc-back .stat-tag b {
  font-weight: 800;
  letter-spacing: .2px;
  font-size: .95em;
  /* keep label emphasized but scaled with pill */
}

/* specific colors */
#beastCards .bc-back .stat-tag--ac {
  --tone: #4da3ff;
}

#beastCards .bc-back .stat-tag--hp {
  --tone: #d65a63;
}

#beastCards .bc-back .stat-tag--speed {
  --tone: #f2c94c;
  color: #1a1600;
  text-shadow: none;
}

/* just in case badges.js targets generic names, lock ours down */
#beastCards .bc-back .bc-tag,
#beastCards .bc-back .stat-tag {
  mix-blend-mode: normal !important;
  opacity: 1 !important;
  filter: none !important;
  border-radius: 999px !important;
}

#beastCards .bc-back .bc-desc {
  margin: 8px 2px 6px;
  line-height: 1.25;
  opacity: .95;
}

/* ========== Tears page helpers ========== */
.page-tears .toc-col {
  position: relative;
}

.page-tears .toc.sticky {
  position: sticky;
  top: 80px;
  display: block;
  padding: 16px 18px;
  background: var(--sb-panel2);
  border: 1px solid var(--sb-border);
  border-radius: 10px;
}

.page-tears .toc-list {
  list-style: decimal;
  padding-left: 20px;
  margin: 0;
}

.page-tears .toc-list a {
  text-decoration: none;
}

.page-tears .toc-list a.active {
  text-decoration: underline;
}

.page-tears .hero {
  margin: 0 0 16px 0;
}

.page-tears .hero img {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 10px;
}

/* Readability without changing font-size */
.page-tears :where(p, li) {
  line-height: 1.6;
}

.page-tears .skz-kv {
  margin: 0;
  padding-left: 20px;
}

.page-tears .skz-kv li {
  margin: 8px 0;
}

/* === COLOUR CARDS: 3-across grid, centered, ~0.9rem === */
/* (Fix: leading dot added so rule actually applies) */
.page-tears .colour-list {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 18px;
  list-style: none;
  /* remove bullets */
  padding-left: 0;
  /* remove left indent */
  margin: 0;
  text-align: center;
  font-size: 0.9rem;
  /* local to this component only */
}

/* responsive fallbacks */
@media (max-width: 1100px) {
  .page-tears .colour-list {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 640px) {
  .page-tears .colour-list {
    grid-template-columns: 1fr;
  }
}

/* individual colour card */
.page-tears .colour-list>li {
  border: 1px solid var(--sb-border);
  background: var(--sb-panel1);
  border-radius: 12px;
  padding: 16px 18px;
  box-shadow:
    inset 0 0 0 2px var(--skz-gold, #d9b35a),
    /* inner gold ring */
    0 1px 0 rgba(0, 0, 0, 0.06);
}

/* title row */
.page-tears .colour-list h3 {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin: 0 0 8px 0;
  font-size: inherit;
}

/* inner details centered, no bullets/indent */
.page-tears .detail {
  margin: 0;
  padding: 0;
  list-style: none;
}

.page-tears .detail li {
  margin: 4px 0;
}

/* general lists */
.page-tears .bullets {
  padding-left: 20px;
}

.page-tears .bullets li {
  margin: 8px 0;
}

/* Colour chips — slightly larger for 0.9rem */
.chip {
  width: 16px;
  height: 16px;
  display: inline-block;
  border-radius: 50%;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.chip-blue {
  background: linear-gradient(135deg, #5bb0ff, #315bbf);
}

.chip-red {
  background: linear-gradient(135deg, #ff6453, #a71d27);
}

.chip-gold {
  background: linear-gradient(135deg, #ffd56b, #b88900);
}

.chip-violet {
  background: linear-gradient(135deg, #a689ff, #5a3bb2);
}

.chip-silver {
  background: linear-gradient(135deg, #dfe6ee, #9aa7b5);
}

.chip-black {
  background: linear-gradient(135deg, #111, #333);
}

.chip-green {
  background: linear-gradient(135deg, #79cf6b, #2f8a3a);
}

.chip-white {
  background: linear-gradient(135deg, #fff, #dfe6ee);
}

.chip-grey {
  background: linear-gradient(135deg, #bdbdbd, #888);
}

/* Accessibility helper */
.visually-hidden {
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
}

/* Page spacing */
.page-tears .tb-panel {
  margin-bottom: 16px;
}

.page-tears .tb-title {
  margin-bottom: 8px;
}

/* === Artefact cards === */
.artefact-grid {
  display: grid;
  gap: 18px;
  grid-template-columns: 1fr;
  /* single column; change to repeat(2,1fr) if you want 2-up */
}

.artefact-card {
  background: var(--sb-panel1);
  border: 1px solid var(--sb-border);
  border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.06);
}

.artefact-header {
  padding: 16px 18px;
  background: var(--sb-gold-muted);
  /* safer fallback than --sb-gold-muted */
  border-bottom: 1px solid var(--sb-border);
}

.artefact-title {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 0;
  line-height: 1.3;
}

.artefact-subtitle {
  margin: 6px 0 0 0;
  opacity: 1;
  font-size: inherit;
}

.artefact-body {
  padding: 16px 18px;
  display: grid;
  gap: 14px;
}

.artefact-body h4 {
  margin: 0 0 6px 0;
  font-size: inherit;
}

.artefact-list {
  margin: 0;
  padding-left: 20px;
}

.artefact-card--template {
  outline: 1px dashed var(--sb-border);
}

.artefact-card--template .artefact-title::after {
  content: "Artefact";
  font-size: inherit;
  margin-left: auto;
  background: rgba(255, 255, 255, 0.06);
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid var(--sb-border);
}

/* keep your existing bullets utility */
.nodec.bullets {
  padding-left: 20px;
}

.nodec.bullets li {
  margin: 6px 0;
}

/* =========================================================
   SKAZKA Timeline • Modal + “More…” (end-of-summary button)
   ========================================================= */

/* Container that holds the pill at the end of the summary */
.skz-tl-morewrap {
  display: flex;
  justify-content: flex-end;
  margin-top: 10px;
}

/* “More…” pill — hard overrides to beat any global button styles */
.skz-tl-more {
  /* defeat global button sizing */
  width: auto !important;
  inline-size: auto !important;
  height: 28px !important;
  min-width: 0 !important;
  max-width: none !important;

  /* center the text perfectly */
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
  line-height: 1 !important;
  /* <- key for vertical centering */
  padding: 0 12px !important;
}

.skz-tl-more:hover {
  background: var(--sb-panel2);
  transform: translateY(-1px);
}

.skz-tl-more:active {
  transform: scale(0.99);
}

.skz-tl-more:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* -------------------- Modal -------------------- */
#skz-tl-modal-root {
  position: fixed;
  inset: 0;
  display: none;
  z-index: 99999;
}

#skz-tl-modal-root.open {
  display: block;
}

.skz-modal-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, .55);
}

.skz-modal-dialog {
  position: absolute;
  left: 50%;
  top: 8%;
  transform: translateX(-50%);
  max-width: min(860px, 92vw);
  max-height: 80vh;
  overflow: auto;

  background: var(--sb-panel2);
  border: 1px solid var(--sb-border);
  box-shadow: 0 12px 40px rgba(0, 0, 0, .55);
  border-radius: 14px;
  padding: 14px 16px 18px;
}

/* Clean header row with the title at left and × at right */
.skz-modal-head {
  display: flex;
  align-items: center;
  gap: 12px;
  padding-bottom: 8px;
  margin-bottom: 10px;
  border-bottom: 1px solid var(--sb-border);
}

.skz-modal-title {
  flex: 1 1 auto;
  margin: 0;
  font-size: 1.2rem;
  color: var(--sb-text);
}

/* Close button aligned to the right (no absolute positioning) */
.skz-modal-close {
  /* defeat global button sizing */
  width: auto !important;
  inline-size: auto !important;
  height: 28px !important;
  min-width: 28px !important;
  /* keeps a nice square tap target */
  max-width: none !important;

  /* compact, right-aligned pill */
  margin-left: auto;
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
  line-height: 1 !important;
  padding: 0 10px !important;
  border-radius: 999px;
  font-size: 16px;
  /* smaller × */
}

.skz-modal-close:hover {
  background: var(--sb-panel2);
  transform: translateY(-1px);
}

.skz-modal-body {
  font-size: .95rem;
  line-height: 1.55;
  color: var(--sb-text);
}

body.skz-modal-open {
  overflow: hidden;
}